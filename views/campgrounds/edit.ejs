<% layout('layouts/boilerplate') %> 
<div class="col-6 mx-auto mb-3">
    <h2>Edit Campground</h2>
    <form action="/campgrounds/<%= camp._id %>?_method=PUT" method="POST" class="needs-validation" novalidate enctype="multipart/form-data">
        <div class="input-group mb-3">
            <!-- <label for="title" class="form-label">Title: </label> -->
            <span class="input-group-text" id="inputGroup-sizing-sm">Title of Camp</span>
            <input type="text" class="form-control" name="campgrounds[title]" id="title" value="<%= camp.title %>" required>
          </div>
    <div class="input-group mb-3">
        <span class="input-group-text" id="inputGroup-sizing-sm">Location</span>
        <input type="text" class="form-control" name="campgrounds[location]" id="location" value="<%= camp.location %>" required>
    </div>
    <div class="mb-3">
      <label for="images">Add Images</label>
      <input type="file" name="image" id="image" multiple>
    </div>
    
    <div class="input-group mb-3">
        <span class="input-group-text" id="inputGroup-sizing-sm">$</span>
        <input type="text" class="form-control" name="campgrounds[price]" id="price" value="<%= camp.price%>" required>
    </div>
    <div class="mb-3">
        <span class="input-group-text" id="inputGroup-sizing-sm">Description</span>
        <textarea class="form-control" name="campgrounds[description]" id="description" rows="2" value="<%= camp.description %>" required></textarea>
      </div>
      <div class="mb-3">
        <% camp.images.forEach(function(img,i){ %>
           <img src="<%= img.thumbnail %>" class="img-thumbnail" alt="">
           <div class="form-check-inline">
            <input type="checkbox" name="deleteImages[]" id="image-<%=i%>" value="<%= img.filename %> ">
            <label for="image-<%=i%>">Delete?</label>
           </div>
          <% }) %>  
      </div>
      <button class="btn btn-success">Submit</button>
      <a class="btn btn-danger" href="/campgrounds/<%= camp._id %>" role="button">Back</a>
      <a class="btn btn-info" href="/campgrounds%>" role="button">All Campgrounds</a>
    </form>
</div>

<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
      'use strict'
    
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.querySelectorAll('.needs-validation')
      
      Array.from(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
    
            form.classList.add('was-validated')
          }, false)
        })
    })()
    
    </script>